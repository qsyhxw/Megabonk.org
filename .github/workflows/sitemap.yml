name: Generate Sitemap

on:
  push:
    branches:
      - main  # 或者 master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # 第一步：把你的代码下载到虚拟机
      - name: Checkout Repository
        uses: actions/checkout@v4

      # 第二步：运行那个“爬虫”机器人
      - name: Generate Sitemap
        uses: cicirello/generate-sitemap@v1
        with:
          # 必填！改成你自己的网站域名
          base-url-path: https://megabonk.org 

      # 第三步：使用“自动提交”插件
      - name: Commit and push sitemap.xml
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          # 提交信息
          commit_message: "Auto-generate sitemap.xml"
          # 要提交的文件
          file_pattern: sitemap.xml
          # 提交的用户
          commit_user_name: Sitemap Bot
          commit_user_email: bot@users.noreply.github.com
